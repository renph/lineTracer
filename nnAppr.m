function [y1] = nnAppr(x1)
%NNAPPR neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 14-Apr-2018 17:04:51.
% 
% [y1] = nnAppr(x1) takes these arguments:
%   x = 2xQ matrix, input #1
% and returns:
%   y = 2xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Layer 1
b1 = [0.55637237528477035;-0.70086485642239438;-0.98152479775397339;0.067675320529447233;-0.14833756045938243;-0.922983088263857;0.097597020219536992;-0.093552697749488919;-1.2410278865719369;-0.15312542529296441;-0.45405810190031443;-0.12144395021601559;-0.98685604305267727;0.84765935539493065;-0.10670790856533741;0.046409029843665635;-0.069543707260947135;0.47082948322723517;0.080514272993219421;1.3390380476855102];
IW1_1 = [-0.14596058242876214 0.033703149750339882;-0.50374703497341733 0.1564793186795676;-0.79625394032972474 1.0725309466725184;1.343992180230364 1.2436439591997528;0.50420592022511057 -1.6713736300918227;0.75314931915862082 -0.93623305427537185;0.98225859335639809 2.1531584024683545;-1.2246528715178402 -0.45497013562621941;0.27419077021416599 -0.72833624099940208;1.046966637634936 1.2981803051581882;-0.81539536468557039 -0.30951398201571589;-0.76285966511857484 1.1166660048174439;1.1246574521943169 -0.22597441789790404;-0.069158494659467704 0.6595213121171648;1.6832801802700572 -0.40969753658613112;0.80134824268399363 -0.63065844081879951;-0.99142304254648472 1.2452393238420028;0.31387599349045181 -1.6734823953460354;0.85480400988899397 2.0473104094905548;0.14852290808763133 -0.22844270713718817];

% Layer 2
b2 = [1.5278655044092637;0.62511119144290228;0.026257999656912737;-0.37382180425130157;-0.13638416808172654;-1.2668137001953532;0.48281594584953835;-0.060155588667808894;-1.6912070199310227;1.1963364026561063];
LW2_1 = [0.71031896716563725 0.22190927254410359 1.1898875997273584 0.59686537977544563 0.99747474588483587 0.36550914278784952 1.2093120111136806 1.1476629895158414 -0.96734882463406746 -1.4289421983094768 -0.63440244082553698 -1.0125812872945494 0.73659274766698835 0.77789486196917623 -0.93173132922765178 0.49001933770456152 0.32002195644532488 -1.3865147581804189 1.5233777045236427 0.52654843652122962;1.0430362628812835 -0.46866374045672654 0.5340975958540255 0.75329642160363341 0.097526423030379769 0.48942354439791863 -0.48210201096705596 -0.42032725567498336 -1.2036482301065119 -0.5943801818610629 -0.58795961085036297 -0.88334061330685854 -0.99874211359184117 0.33269464329488191 0.47532595459675908 -0.32083757439714633 -0.3741153239977465 1.0201967152329803 0.63037042417533862 1.0092158725168523;-0.17702773219230367 0.4520166284028494 0.77926333210898258 -0.93053968398290043 -0.23278832950110501 -0.68220552275271817 0.21190374252406816 0.59553678475451244 0.25724703692827827 -0.39685794359144494 -0.78038740703632292 0.34015085408408335 -0.82625541018155513 -0.80300913162414544 0.52473928795267843 -0.54331034148571089 -0.68968036514278985 -0.49425031879309339 -0.49355240061005423 0.73623137183243714;-0.36257984730007631 -0.89281955276811842 -0.43762487790268123 -1.4961692745488289 -0.78826920015248936 -0.13990230930298794 -1.5094677261781044 -0.0013324996323494196 -0.27230486823179001 -0.45543157365221204 0.30330645652862093 -0.58538350174207232 0.043375144357479675 0.99403373836110898 -0.45104456354653433 -0.63483015223073991 -0.049222920741130514 0.96927399295073136 -0.9492409044948612 0.77992019269801971;0.36975519972851828 0.99799101146472502 0.012671232095946682 -0.32602878630443211 -0.025953983664585952 -0.088918891755747187 0.33090220279371202 -1.1302642201362272 -0.59428384809700718 0.79199136619554689 0.047251497521171248 0.93861916451761063 -0.87899061708637338 0.57855364628519335 0.81203175037438624 0.15675299065364937 0.62893374653053091 -0.58943707103259158 0.81514774852598393 -0.6919201506601651;-0.23059387616654367 0.8112728293622069 0.049474496437495935 -0.024096593964152608 -0.55833290269755043 -0.97523437649702971 -0.018419596448104571 0.017440325044582254 0.78926233048262018 -0.33052757028689511 -0.47501288660415025 -0.41216280411246387 0.57423957990495378 0.89962879367000959 -0.43508066766124764 0.34924676795941867 0.85081992547995 -0.11208771689225118 -0.41661499963863169 -0.12046004301400082;-0.22101392555688976 -0.019176482195358117 -0.86892167244619323 0.93090139215682099 0.84671127207031049 -0.22704822816922449 -0.01034376344679358 -0.40668032758130268 -0.14175889287217544 -0.19063521401412245 0.35715854793837004 -0.56432679147908715 -0.67604208133023724 -0.71362295962446542 -0.24110252762307083 0.34530665522351622 -0.39558930591048397 0.44673677882469598 0.92079557001359258 0.11757622337423701;-0.68826592593185465 0.099595853315392141 -0.54849692744641843 -1.008163237570004 0.18454498709511247 1.0473656637883118 -0.43524653000665342 0.55594184792121015 0.35922824854569874 0.20242623370661969 0.7699751131073288 -0.47436742166552165 -0.20778401829000451 -0.63993792589613319 -0.18190472230537855 0.70484599317584429 -0.98816036804250262 -0.39263644808588638 -0.60431794302403907 -0.79757334787352008;0.056792460754188145 0.91257048444439604 0.076288787338212385 0.77746396536337148 -0.43847965445038056 -1.1416006067814024 1.2959008062693764 0.21151728364802516 0.77066821173848732 0.379811831385166 0.50161105746860624 0.62434268700841655 -1.2233363875784196 0.11944539437686981 0.72027092204602861 0.32752868618945402 0.72922043798160274 -0.52835786279441221 0.81762527966373499 0.3063284592821594;0.25680686013873366 0.85889153263557816 -1.1966179491501145 0.11015465973049822 -0.76046513916198877 -0.6599361384053487 0.36771877718719981 0.077735577462897179 0.26880166568356662 0.25541655538822472 -0.4133669587008646 0.21030149292173539 -1.0779268835688947 0.50810017376591798 0.73768812897048852 0.38859238018863057 1.0219474094196299 0.56697810926667647 -0.92901124716180927 0.47849286438611327];

% Layer 3
b3 = [1.0494632878081207;1.5467632348020219];
LW3_2 = [-1.3008885821839593 0.84440903274798296 -0.89093638166749012 2.3215004519309592 0.39480766032391912 -0.69872071782471623 -0.64621261970289512 0.87733248907271588 0.78826424690921904 2.673692110991408;3.4344259656963625 0.85871752816601521 -0.047420202153907583 -0.91563313698717597 -1.3292296496063136 -0.98214942410544281 0.48694087286705923 -1.074452704724705 -1.6207845881799419 0.47569455549114148];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
% no processing

% Layer 1
a1 = poslin_apply(repmat(b1,1,Q) + IW1_1*x1);

% Layer 2
a2 = poslin_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = repmat(b3,1,Q) + LW3_2*a2;

% Output 1
y1 = a3;
end

% ===== MODULE FUNCTIONS ========

% Linear Positive Transfer Function
function a = poslin_apply(n,~)
  a = max(0,n);
  a(isnan(n)) = nan;
end
