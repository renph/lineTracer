function [y1] = nnEnd2End(x1)
%NNEND2END neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 25-Apr-2018 21:36:35.
% 
% [y1] = nnEnd2End(x1) takes these arguments:
%   x = 2xQ matrix, input #1
% and returns:
%   y = 2xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Layer 1
b1 = [2.0545188552164641571;-1.3566490303802736239;0.1033726362119129355;-1.1078926815456771049;0.26026376562027808692;-1.5021645513711245901;-0.20119736331203752489;-0.85374932975360495746;0.38429085387375305771;0.22807254209259031352;-1.9559326989867851232;0.60015749173480026357;0.97389132303104186672;-0.48916576038897252587;0.67946578076919994515;2.5085246682716211275;0.95123832572760347315;0.0088173922808565882714;1.1736675102299323203;-2.6400421020219781987];
IW1_1 = [-0.36403667434292641403 -0.00072577567197797815401;0.36031068994954063012 0.26875305781503133762;0.044286252557803100494 0.092124841341372221137;-0.72783554566555230814 -0.39453484945064648537;-0.25310454135090149075 -0.2786071636973027621;-0.702482088427908824 0.0072829466033780508594;0.23745975204152275362 -0.010693172707908336905;0.097142478875151594409 -0.051357360659526396507;0.89683806852554692757 0.92776024486537500557;0.11181760884316196969 -0.09820128038767175771;0.052038466269042418788 0.14760015361702169545;-0.0147538756495517627 -0.27870207769413640753;-0.089827426303857857426 0.00044757915262100961273;0.01215096079616501297 -0.032037532659918127598;-0.065364766816873282052 -0.10568246845495402053;-0.56407084048203726123 -0.36691962718669851595;0.26994558260522993898 -0.26235561466819373733;0.075987512763016157313 -0.11350958873980568353;0.092685011204133499474 0.13619181194511298383;0.33750460938659432308 -0.32060312380469352389];

% Layer 2
b2 = [-0.98622051590499237861;-0.67043506387221041276;2.206417452198629725;0.5108988117271001661;4.0359692491943759407;-3.6405963840543371646;2.4897179043991841674;-2.9293671787468533729;-0.46354599482287500711;-0.25131199178162577645;2.0946488963242613224;0.98494346241278885046;-4.4116593328679734043;1.2930576514025267088;0.13522143302803232845];
LW2_1 = [-1.925517063471928525 0.14526415011799909127 0.54293214181369076066 2.319127734726285528 0.89453969002945543654 0.30723517862595833838 0.56865113844073345017 0.20373807442523952926 0.96537809175464417422 -0.26087950498244810715 -1.5789612378415673888 -0.61254375482462053437 1.703510923078181305 -0.75159930877517222569 -1.2959792078459884124 -1.3292597597484410166 0.027432654970429452834 0.91338028240627255894 0.30248560273698704703 -1.7925368918365776061;-1.7604667335841119868 -0.52082841672677193667 0.72825546036707544673 2.7440214370735498406 -0.053537880455665688706 -0.9033871430130002711 -1.623202520324084297 -1.1136254754576515591 -0.46401463775430984438 -0.4076994558348886466 2.4919680787055336069 0.069117279410595894307 -2.5333930621733697919 -0.51548202285246769172 0.10260556973710624473 -0.42380710139776911483 -0.99538896303028367996 1.2131193623672058557 -1.2155290141011352301 -0.28455442201186575968;1.4740809643009711305 -0.15327319721454790713 1.1311649167775639224 -1.2952818691516561067 -1.657646210773387363 -1.2946405963103571057 0.53549249629535100592 -0.40454264402648726362 1.4947269493209154323 -0.62352441002963987504 -0.36527459327770661623 0.48378843099152157858 2.284056128934143004 2.9232502608372614716 1.8726776961537419108 2.9150143462888351564 -0.15440788824682372127 -1.4420223592032472837 -0.45898912613380665748 -1.1053582988628609662;-0.2715774958994492394 -0.72254161519386350676 -1.1248143932739895767 0.35625771753267093667 -0.73193244072373775388 -0.31973588923769769021 0.84772984000097850732 0.84110879219639300697 -1.0113293908986691338 -0.27765895322357336816 0.58388458779567264934 -0.38439344302725880764 -0.016349928715350681152 -0.1554970056017911384 -0.58616804909198150231 -1.0995017459991844877 -1.5763677667630482393 -0.43087631016842664611 1.863210866617352357 0.13535982428993892368;0.67315313063399284665 -1.8553686018571771132 1.084455473725587149 -1.3379985878169309288 -0.16375808263367225281 -0.37528449183649442711 0.016088088702206602282 -1.611306932087754662 -0.43835763530959659384 1.2100352186762572959 1.1976717120035758057 -0.58850500148536899481 -0.8092538312250205923 -1.239613826587269374 0.47048114846984201431 -1.0506678296825069374 0.38305954387451474075 1.1862701717424652958 0.14121902004372816064 -2.5913918530288695408;0.64447098539758684854 2.0294527898844036962 1.1454481913605256693 0.010315437829521075311 0.44671397469159690452 2.5400780178115858199 -2.0935747868272995831 -1.3220344543984028363 -0.61851351517543085023 0.54744935402544592229 1.6448345076798109865 1.7198163026112416318 0.45012435747071999348 2.1521369033000223858 0.89795243413294023593 -2.6128370749569476139 1.1422569746155031289 -0.98607071124656198169 0.53083751325333039528 -0.58398773085414568129;0.028510921046770883874 0.91906169180557861775 0.20002549946249031931 -0.16705141994707994879 0.089376026817489490073 0.39286751187159391074 0.46211486618765645895 -0.38360956297779219559 -0.056474454675695812123 -1.3463616885888405328 0.29568936666594208829 0.0061222730979075389718 -2.5726944006183707359 -1.3263431420658855497 -0.87246959306358751185 0.24023219837065809545 1.2122836425385157266 -0.95584800326277952198 -2.8583088504968441335 -0.70218700980271808731;0.23360467028116763122 0.4634299512556609435 -0.59880765458952867064 -0.075117273769248746329 -0.50892784272567992421 -0.92910594311037064674 -0.25752197187598752093 0.3196506639502387781 0.076237564377869965204 1.084303248456523816 -0.47467474614492050078 -0.77062194540731010495 -0.66074746157157826509 -2.0182895301890591 1.8345196489468775791 -0.35536346790774797633 -0.51409150070405529309 -0.24218697472455191777 -0.031839687560479834616 -0.095661452942353966677;-0.37826061008266781416 0.18296169039650811428 -0.10368948887063129949 -0.73271334653606734477 -0.25929912641816954544 -0.48031631423942910963 -0.83050509612214706845 0.30765021345283305454 0.067862622944978023831 0.022994926741331515874 -0.50663489318809873385 0.29600644787108287836 -0.66207118586333091326 -0.15399077289849102956 0.14560083289883851698 -0.3756154686951025945 -0.21952067716263415353 -0.85857235135563803041 0.065439066529149894635 1.0182208970235122614;-0.58614493886379814835 -0.90910834210773328046 0.94517048665990088807 -0.57180059750476519564 0.66863237454931645498 -0.8135753657019961782 -0.55446025213664684728 0.94379669780632557963 1.0750621768612771412 1.5525091149051848394 -0.11917873570782606951 -0.6564159445683741545 -0.60085433348404371223 0.35612459318497630134 0.042903547116392631855 -2.716236169261814215 0.85377025154879493396 1.5486355331583092632 -1.7429032151385128735 1.2539485747737220134;-0.79766820279107741865 0.61436639642671397876 -2.3613228437992508368 1.4936624410458991807 0.90688304497613325683 -0.041104426751413902785 1.1138710533705760142 -0.5029402048295301686 -0.48389003648248202216 -1.0947910355063390497 -0.87090547649447891398 -0.010348220988775302942 2.1973403396692940959 3.6625713713900251989 -1.6910564740029347952 -0.24589343976393493452 3.3478628489356130338 -1.3727871629365533401 -0.69435702481253480656 -2.8949011368143273693;-0.81773621693819520395 1.067789469214256437 -1.8217752984393087434 0.48166603972260202404 1.759762864530091564 2.5297969363043475433 1.6639013837218643577 -0.60448221206375740699 2.1696422130669836825 0.18492617929086715978 -0.46663579013146067043 -1.5151847804369986683 0.30919516266135710358 1.1055192469037897762 -0.52966656822406943395 -0.33424024506678318147 -0.33117089580684877514 0.10693717237321878621 -0.53061529580130151196 -1.8339544009434647354;0.84867207723121051988 2.4173668406039450218 0.1024892521721287586 0.53877011812724584505 0.22634023335172634428 -0.00098952272928632539761 -0.99756453405980649585 0.71595736294044232118 0.56792185548033236042 1.4832836995038922723 1.3180036116464088902 1.8562595308206237821 0.18817508028206472726 1.4423610885877173882 -1.5838243625382719681 0.61425415635465274722 -0.3844406462516976597 1.5189531039753536579 -0.87122718975468149694 -2.0767693303162477747;0.40575032582468439912 0.48784989033539200021 1.005370782991628742 -1.4465924597617956238 -0.99071363090090980297 2.6495678453187792023 -0.25425130414916741195 -0.83303055239454870673 0.457143862469182094 0.75188536547364692719 -0.84607191277551729858 -0.36100682235523140484 -0.47696769934778815436 0.10858797711412743192 2.1457597264462955344 -0.96473948805629272663 -2.651690483032809631 0.7376853431566358088 1.1071493138555192903 -2.7288055827967756528;-0.0036408788983479248649 1.0724080407691605199 1.3641643353920944737 1.5846843569592188317 0.35425431750295299782 0.18882596899963702275 1.7295740189380599539 -0.26601542122604893148 -1.0889006910954639462 0.89678714349666321937 1.658500833957573084 1.390562899964714827 2.9226785992902097888 1.2599793052134646842 1.6766251745797708939 -1.3808077429607656939 -0.71165423407390693278 0.85762163073733421736 1.6359641641554409919 -0.44031198112410574463];

% Layer 3
b3 = [6.3347128349618309073;9.4627004149677382827];
LW3_2 = [-0.97111642340208781388 -0.027951072101087628269 0.46614506279285261581 0.50017623057785320917 -1.0614399423240117315 0.48875302638018891521 2.2578833048750719392 0.82148050296464769637 -1.0092654038766053493 -0.25752385056047716327 -0.2340034718005231662 0.050301899926864651613 0.30805287584193691286 -0.24679550276536468822 0.29513188050335803503;1.1738730161900874371 -0.193851399104925326 -0.088035478218824514407 1.3596260032179763311 1.3608114389837315805 -0.53218328895128264033 -1.4952178030003373532 -1.0747482185033221391 -0.44312516022723325015 0.53253160254263387507 0.59098493242770389067 -0.1074760597390109762 -0.97065020413264202492 0.40729340991561480134 0.093830899844253981557];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
% no processing

% Layer 1
a1 = poslin_apply(repmat(b1,1,Q) + IW1_1*x1);

% Layer 2
a2 = poslin_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = repmat(b3,1,Q) + LW3_2*a2;

% Output 1
y1 = a3;
end

% ===== MODULE FUNCTIONS ========

% Linear Positive Transfer Function
function a = poslin_apply(n,~)
  a = max(0,n);
  a(isnan(n)) = nan;
end
